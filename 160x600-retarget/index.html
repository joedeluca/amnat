<html>
  <head>
    <title>160x600</title>
    <meta name="ad.size" content="width=160,height=600" />
    <script src="https://s0.2mdn.net/ads/studio/Enabler.js"></script>
    <script src="https://s0.2mdn.net/ads/studio/cached_libs/gsap_3.11.5_min.js"></script>
    <meta name="ad.size" content="width=160,height=600" />

    <style>
      * {
        margin: 0;
        padding: 0;
      }
      .banner {
        background-color: #061b2c;
        width: 158px;
        height: 598px;
        position: relative;
        overflow: hidden;
        border: 1px solid black;
        color: white;
        cursor: pointer;
      }
      img {
        position: absolute;
        opacity: 0;
      }
      #logo {
        top: 30px;
        left: 50%;
        transform: translateX(-50%);
        z-index: 1;
      }
      #bottomBar {
        position: absolute;
        opacity: 0;
        bottom: 0;
        width: 160px;
        height: 48px;
        background-color: #ffb81c;
        z-index: 0;
      }
      #text_1 {
        top: 325px;
        left: 4px;
      }
      #text_1b {
        top: 249px;
        left: 14px;
      }
      #text_2 {
        top: 325px;
        left: 14px;
      }
      #text_3 {
        top: 325px;
        left: 4px;
      }
      #text_4 {
        top: 325px;
        left: 4px;
      }
      #text_5 {
        top: 30px;
        left: 50%;
        transform: translateX(-50%);
      }
      #text_6 {
        top: 425px;
        left: 50%;
        transform: translateX(-50%);
      }
      #cta_text {
        opacity: 0;
        background-color: transparent;
        position: absolute;
        cursor: pointer;
        z-index: 2;
        top: 578px;
        left: 50%;
        transform: translateX(-50%);
        width: 160px;
        font-size: 7px;
        text-transform: uppercase;
        font-family: Arial, Helvetica, sans-serif;
        text-align: center;
        color: #061b2c;
      }
      #cta {
        top: 510px;
        left: 50%;
        transform: translateX(-50%);
        z-index: 3;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <div id="banner" class="banner">
      <div id="bottomBar"></div>
      <img
        src="logo.png"
        id="logo"
        width="100"
        height="30"
        alt="American National Logo"
      />
      <img
        id="bgImg"
        src="bg.png"
        style="position: absolute; top: 0; left: 0; opacity: 0; z-index: 0"
        alt="Background"
      />
      <img
        id="bg2Img"
        src="bg2.png"
        style="position: absolute; top: 0; left: 0; opacity: 0; z-index: 0"
        alt="Background 2"
      />
      <img
        id="text_1a"
        src="text_1a.png"
        style="position: absolute; top: 324px; left: 14px; opacity: 0"
      />
      <img id="text_1" src="text_1.png" />
      <img id="text_1b" src="text_1b.png" />
      <img id="text_2" src="text_2.png" alt="Growth" />
      <img id="text_3" src="text_3.png" alt="Text 3" />
      <img id="text_4" src="text_4.png" />
      <img id="text_5" src="text_5.png" alt="Text 5" />
      <img id="text_6" src="text_6.png" alt="Text 5" />
      <span id="cta_text">Click for Details</span>
      <img id="cta" src="button_up.png" alt="CTA Button" />
      <div id="bgExit"></div>
    </div>
    <script>
      // Animation configuration
      const TIMING = {
        sceneDuration: 2, // Time between scenes
        fadeSpeed: 0.5, // Fade in/out speed
        slideDistance: 10, // Horizontal slide distance in pixels
      }

      function createTimeline() {
        var tl = gsap.timeline()

        // SCENE 1: Background + Logo + Initial text
        tl.add("scene1")
          .to("#bgImg", { duration: TIMING.fadeSpeed, opacity: 1 }, "scene1")
          .to(
            "#text_1a",
            { duration: 1, opacity: 1, ease: "back.out(1.7)" },
            "scene1"
          )
          .to(
            "#text_1b",
            { duration: 1, opacity: 1, ease: "power3.out" },
            "scene1"
          )
          .to(
            "#text_1",
            {
              duration: 1,
              opacity: 1,
              x: `+=${TIMING.slideDistance}`,
              ease: "power4.out",
            },
            "scene1+=0.2"
          )
          .to("#logo", { duration: TIMING.fadeSpeed, opacity: 1 }, "scene1")

        // SCENE 2: Swap text_1 for text_2
        tl.add("scene2", `+=${TIMING.sceneDuration}`)
          .to(
            "#text_1",
            {
              duration: TIMING.fadeSpeed,
              x: `+=${TIMING.slideDistance}`,
              opacity: 0,
            },
            "scene2"
          )
          .to(
            "#text_2",
            { duration: TIMING.fadeSpeed, opacity: 1 },
            "scene2+=0.5"
          )

        // SCENE 3: Swap text_2 for text_3
        tl.add("scene3", `+=${TIMING.sceneDuration}`)
          .to(
            "#text_2",
            {
              duration: TIMING.fadeSpeed,
              x: `+=${TIMING.slideDistance}`,
              opacity: 0,
            },
            "scene3"
          )
          .to(
            "#text_3",
            {
              duration: TIMING.fadeSpeed,
              x: `+=${TIMING.slideDistance}`,
              opacity: 1,
            },
            "scene3+=0.5"
          )

        // SCENE 4: Swap text_3 for text_4
        tl.add("scene4", `+=${TIMING.sceneDuration}`)
          .to(
            "#text_3",
            {
              duration: TIMING.fadeSpeed,
              x: `+=${TIMING.slideDistance}`,
              opacity: 0,
            },
            "scene4"
          )
          .to(
            "#text_4",
            {
              duration: TIMING.fadeSpeed,
              x: `+=${TIMING.slideDistance}`,
              opacity: 1,
            },
            "scene4+=0.5"
          )

        // SCENE 5: Final CTA scene - fade out all previous, fade in CTA elements
        tl.add("scene5", `+=${TIMING.sceneDuration}`)
          // Fade out previous scene
          .to("#bgImg", { duration: TIMING.fadeSpeed, opacity: 0 }, "scene5")
          .to("#text_4", { duration: TIMING.fadeSpeed, opacity: 0 }, "scene5")
          .to("#logo", { duration: TIMING.fadeSpeed, opacity: 0 }, "scene5")
          .to("#text_1b", { duration: TIMING.fadeSpeed, opacity: 0 }, "scene5")
          .to("#text_1a", { duration: TIMING.fadeSpeed, opacity: 0 }, "scene5")
          // Reposition logo after fade out
          .set("#logo", { top: 151, y: 0 })
          // Fade in bg2
          .to(
            "#bg2Img",
            { duration: TIMING.fadeSpeed, opacity: 1 },
            "scene5+=.5"
          )
          // Fade in logo and text_5
          .to("#logo", { duration: TIMING.fadeSpeed, opacity: 1 }, "scene5+=.5")
          .to(
            "#text_5",
            { duration: TIMING.fadeSpeed, opacity: 1 },
            "scene5+=.5"
          )
          .to(
            "#text_6",
            {
              duration: TIMING.fadeSpeed,
              ease: "back.out(1.7)",
              y: `-=${TIMING.slideDistance}`,
              opacity: 1,
            },
            "scene5+=1"
          )
          .to("#cta", { duration: TIMING.fadeSpeed, opacity: 1 }, "scene5+=1")
          .to(
            "#cta_text",
            { duration: TIMING.fadeSpeed, opacity: 1 },
            "scene5+=1"
          )

        return tl
      }

      // Scale all images to 50% of their natural size
      function adjustImageSizes() {
        const images = document.querySelectorAll("img")
        images.forEach((img) => {
          const adjustSize = () => {
            img.style.width = img.naturalWidth / 2 + "px"
            img.style.height = img.naturalHeight / 2 + "px"
          }
          if (img.complete) {
            adjustSize()
          } else {
            img.onload = adjustSize
          }
        })
      }

      // Click handler for banner exit
      function handleBannerClick(e) {
        Enabler.exit("CTA Exit")
      }

      // Initialize the banner when ad is visible
      function initBanner() {
        document
          .getElementById("banner")
          .addEventListener("click", handleBannerClick)
        adjustImageSizes()
        createTimeline()
      }

      // Google Studio Enabler initialization
      function enablerInitialized() {
        if (!Enabler.isVisible()) {
          Enabler.addEventListener(
            studio.events.StudioEvent.VISIBLE,
            initBanner
          )
        } else {
          initBanner()
        }
      }

      if (!Enabler.isInitialized()) {
        Enabler.addEventListener(
          studio.events.StudioEvent.INIT,
          enablerInitialized
        )
      } else {
        enablerInitialized()
      }
    </script>
  </body>
</html>
